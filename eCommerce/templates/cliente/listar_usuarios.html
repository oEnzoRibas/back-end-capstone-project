{% extends 'base.html' %}

{% block title %}Gerenciamento de Usuários{% endblock %}

{% block content %}
<div class="row mb-4">
    <div class="col-md-10">
        <h1 class="mb-0">Usuários Registrados</h1>
        <p class="text-muted">Lista completa de clientes e administradores do sistema.</p>
    </div>
    <div class="col-md-2 text-end">
        {# Link opcional para criar usuário, se houver uma rota, ou apenas um painel #}
        <a href="{{ url_for('produtos.listar') }}" class="btn btn-secondary">
            Voltar ao Catálogo
        </a>
    </div>
</div>

{# Verifica se a lista de usuários foi passada (e se há usuários) #}
{% if usuarios %}
<div class="table-responsive">
    <table class="table table-striped table-hover table-bordered">
        <thead class="table-dark">
            <tr>
                <th>ID</th>
                <th>Nome</th>
                <th>Email</th>
                <th>Telefone</th>
                <th>Role (Função)</th>
                <th>Ações</th>
            </tr>
        </thead>
        <tbody>
            {% for user in usuarios %}
            <tr>
                <td>{{ user.id }}</td>
                <td>{{ user.nome }}</td>
                <td>{{ user.email }}</td>
                <td>{{ user.telefone | default('N/A', true) }}</td>
                <td>
                    {% if user.role == 'admin' %}
                    <span class="badge bg-danger">Administrador</span>
                    {% else %}
                    <span class="badge bg-info">Cliente</span>
                    {% endif %}
                </td>
                <td>
                    {# Links de Ação (Ajuste estas rotas conforme seu projeto) #}
                    <a href="{{ url_for('cliente.perfil', user_id=user.id) }}"
                        class="btn btn-sm btn-outline-primary me-2" title="Ver Detalhes">
                        <i class="fas fa-eye"></i>
                    </a>
                    {# Exemplo de link para editar perfil (requer rota e decorador admin) #}
                    {# <a href="{{ url_for('cliente.editar_perfil', user_id=user.id) }}"
                        class="btn btn-sm btn-outline-warning" title="Editar">
                        <i class="fas fa-edit"></i>
                    </a> #}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<div class="alert alert-info text-center mt-5">
    <h4>Nenhum usuário registrado no sistema.</h4>
</div>
{% endif %}

{# Para os ícones, garanta a inclusão do Font Awesome no seu base.html #}
{% endblock %}